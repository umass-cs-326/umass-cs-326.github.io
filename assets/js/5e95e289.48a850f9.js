"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3849],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>h});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var i=n.createContext({}),c=function(e){var t=n.useContext(i),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},u=function(e){var t=c(e.components);return n.createElement(i.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,s=e.originalType,i=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),d=c(a),m=r,h=d["".concat(i,".").concat(m)]||d[m]||p[m]||s;return a?n.createElement(h,l(l({ref:t},u),{},{components:a})):n.createElement(h,l({ref:t},u))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=a.length,l=new Array(s);l[0]=m;var o={};for(var i in t)hasOwnProperty.call(t,i)&&(o[i]=t[i]);o.originalType=e,o[d]="string"==typeof e?e:r,l[1]=o;for(var c=2;c<s;c++)l[c]=a[c];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},53488:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>i,contentTitle:()=>l,default:()=>d,frontMatter:()=>s,metadata:()=>o,toc:()=>c});var n=a(87462),r=(a(67294),a(3905));const s={},l="L17 ACID and SQL",o={unversionedId:"lectures/acid-sql/index",id:"lectures/acid-sql/index",title:"L17 ACID and SQL",description:"Relational Databases",source:"@site/docs/03-lectures/17-acid-sql/index.md",sourceDirName:"03-lectures/17-acid-sql",slug:"/lectures/acid-sql/",permalink:"/docs/lectures/acid-sql/",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"L16 Routing",permalink:"/docs/lectures/routing/"},next:{title:"L18 Node and SQL",permalink:"/docs/lectures/node-sql/"}},i={},c=[{value:"Relational Databases",id:"relational-databases",level:2},{value:"ACID",id:"acid",level:2},{value:"Slides",id:"slides",level:2},{value:"Code Examples",id:"code-examples",level:2},{value:"Exercise",id:"exercise",level:2},{value:"Resources",id:"resources",level:2},{value:"VSCode",id:"vscode",level:3}],u={toc:c};function d(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"l17-acid-and-sql"},"L17 ACID and SQL"),(0,r.kt)("h2",{id:"relational-databases"},"Relational Databases"),(0,r.kt)("p",null,"A relational database is a type of database that stores and organizes data in tables consisting of rows and columns. Each table represents a specific type of object or concept, and each row represents a unique instance of that object or concept. The columns, also known as fields, represent the attributes or properties of the object or concept."),(0,r.kt)("p",null,"In a relational database, tables can be related to each other through common attributes, which are used to establish relationships between tables. These relationships can be one-to-one, one-to-many, or many-to-many."),(0,r.kt)("p",null,"Relational databases are based on the relational model, which was first introduced by Edgar Codd in 1970. The relational model uses a set of mathematical principles to organize and manipulate data. The model is based on the concept of relations, which are sets of tuples (rows) that have a common set of attributes (columns)."),(0,r.kt)("p",null,"One of the benefits of a relational database is that it allows for efficient data retrieval and manipulation. Relational databases use structured query language (SQL) to access and manipulate data. SQL allows users to create, modify, and retrieve data from tables and to perform complex operations on the data, such as sorting, filtering, and aggregating."),(0,r.kt)("p",null,"Relational databases are widely used in various industries, including finance, healthcare, and e-commerce, to manage and store large amounts of data. They are also the foundation for many web applications and are essential for building scalable, reliable, and secure applications."),(0,r.kt)("p",null,"Here are some examples of SQL:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"SELECT statement:")," used to retrieve data from a table or view")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * FROM customers;\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"WHERE clause:")," used to filter query results based on a specified condition")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * FROM customers WHERE age > 18;\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"ORDER BY clause:")," used to sort query results in ascending or descending order based on a specified column")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * FROM customers ORDER BY last_name ASC;\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"GROUP BY clause:")," used to group query results by one or more columns")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT city, COUNT(*) FROM customers GROUP BY city;\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"JOIN clause:")," used to combine data from two or more tables based on a related column")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * FROM customers JOIN orders \n    ON customers.customer_id = orders.customer_id;\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"INSERT statement:")," used to insert data into a table")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"INSERT INTO customers (first_name, last_name, email) VALUES ('John', 'Doe', 'johndoe@gmail.com');\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"UPDATE statement:")," used to update existing data in a table")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"UPDATE customers SET email = 'newemail@gmail.com' WHERE customer_id = 1;\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"DELETE statement:")," used to delete data from a table")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"DELETE FROM customers WHERE customer_id = 1;\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"AGGREGATE functions:")," used to perform calculations on query results, such as finding the sum, average, or maximum value of a column")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT AVG(price) FROM products;\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"SUBQUERIES:")," used to nest one query inside another query")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * FROM customers WHERE customer_id \n  IN (SELECT customer_id FROM orders WHERE total > 100);\n")),(0,r.kt)("h2",{id:"acid"},"ACID"),(0,r.kt)("p",null,"ACID stands for Atomicity, Consistency, Isolation, and Durability. These properties are essential in ensuring the reliability of transactions in a database. SQL, or Structured Query Language, is a language used to manage relational databases. In this post, we will explore how ACID properties are implemented in SQL."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Atomicity:"),"\nThe atomicity property ensures that a transaction is treated as a single unit of work. Either all the changes made by the transaction are committed, or none of them are. In SQL, transactions are initiated using the BEGIN TRANSACTION statement and are committed using the COMMIT statement. If a transaction fails, the ROLLBACK statement is used to undo any changes made during the transaction."),(0,r.kt)("p",null,"For example, consider the following SQL code:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"BEGIN TRANSACTION;\nUPDATE accounts SET balance = balance - 100 WHERE account_number = 123;\nUPDATE accounts SET balance = balance + 100 WHERE account_number = 456;\nCOMMIT;\n")),(0,r.kt)("p",null,"In this example, we are transferring 100 from account 123 to account 456. If one of the update statements fails, the entire transaction will be rolled back, and no changes will be made to either account."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Consistency:"),"\nThe consistency property ensures that a transaction brings the database from one valid state to another. This means that the database's integrity is maintained during the transaction. In SQL, constraints are used to ensure data consistency."),(0,r.kt)("p",null,"For example, consider a table of employees with a constraint that ensures that each employee's salary is greater than 0:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE employees (\n   employee_id INT PRIMARY KEY,\n   name VARCHAR(50),\n   salary DECIMAL(10,2) CHECK (salary > 0)\n);\n")),(0,r.kt)("p",null,"If a transaction tries to insert a row with a negative salary value, the constraint will prevent the transaction from being committed."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Isolation:"),"\nThe isolation property ensures that concurrent transactions do not interfere with each other. In SQL, transactions are isolated using locking mechanisms. When a transaction modifies a database record, it acquires a lock on that record. Other transactions that try to modify the same record must wait until the lock is released."),(0,r.kt)("p",null,"For example, consider two transactions that both try to update the same record:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"-- Transaction 1\nBEGIN TRANSACTION;\nUPDATE customers SET balance = balance + 100 WHERE customer_id = 123;\nCOMMIT;\n\n-- Transaction 2\nBEGIN TRANSACTION;\nUPDATE customers SET balance = balance - 50 WHERE customer_id = 123;\nCOMMIT;\n")),(0,r.kt)("p",null,"In this example, transaction 1 acquires a lock on the customer record with ID 123. Transaction 2 must wait until transaction 1 is committed or rolled back before it can modify the same record."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Durability:"),"\nThe durability property ensures that once a transaction is committed, the changes made by the transaction are permanent and survive any subsequent system failures. In SQL, this is achieved by writing transaction changes to disk before committing."),(0,r.kt)("p",null,"For example, consider the following SQL code:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"BEGIN TRANSACTION;\nUPDATE inventory SET quantity = quantity - 1 WHERE product_id = 123;\nCOMMIT;\n")),(0,r.kt)("p",null,"After the transaction is committed, the change in inventory quantity is written to disk and will persist even if there is a power outage or other system failure."),(0,r.kt)("p",null,"ACID properties are essential for ensuring the reliability of transactions in a database. SQL provides a robust set of tools to implement these properties, including transactions, constraints, locking mechanisms, and durable writes. By understanding and implementing these properties, developers can build reliable and scalable applications that handle data with confidence."),(0,r.kt)("h2",{id:"slides"},"Slides"),(0,r.kt)("iframe",{src:"https://docs.google.com/presentation/d/e/2PACX-1vQlN4OtSM87iplZEPuN7XdBL3XPVfIlpM8zijx5Qmo_b6zUJ5e-QoZ2QDtsSqvXCup02qqf3MkLJN04/embed?start=false&loop=false&delayms=3000",frameborder:"0",width:"960",height:"569",allowfullscreen:"true",mozallowfullscreen:"true",webkitallowfullscreen:"true"}),(0,r.kt)("p",null,"The slide deck can be found ",(0,r.kt)("a",{parentName:"p",href:"https://docs.google.com/presentation/d/1MweK0GybmPQoOwczMcoYg-Wxf4Ix9Mo4K20NRsRZspE/edit?usp=sharing"},"here"),"."),(0,r.kt)("p",null,"The Jamboard can be found ",(0,r.kt)("a",{parentName:"p",href:"https://jamboard.google.com/d/1ap8dwk-NNHAZ9KjvA4jdJAWGBwasyXZAVV_H5cMeDko/edit?usp=share_link"},"here"),"."),(0,r.kt)("h2",{id:"code-examples"},"Code Examples"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/umass-cs-326/examples/tree/main/17-acid-and-sql"},"examples/17-acid-and-sql"))),(0,r.kt)("p",null,"You can view all of the examples by cloning the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/umass-cs-326/examples"},"examples repository"),"."),(0,r.kt)("h2",{id:"exercise"},"Exercise"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"NO EXERCISE"),", but you should really practice this stuff!"),(0,r.kt)("h2",{id:"resources"},"Resources"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.elephantsql.com/"},"ElephantSQL"),", a free PostgreSQL hosting service"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.elephantsql.com/blog/databases-for-beginners-what-is-a-database-what-is-postgresql.html"},"Part 1. Databases for beginners - What is a database? What is PostgreSQL?")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.elephantsql.com/blog/databases-for-beginners-what-is-sql-what-is-postgresql.html"},"Part 2. Databases for beginners - What is a SQL? Getting started with PostgreSQL"))),(0,r.kt)("h3",{id:"vscode"},"VSCode"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer"},"VSCode Live Server"),", an extension we will end up using quite a bit for several weeks.")))}d.isMDXComponent=!0}}]);