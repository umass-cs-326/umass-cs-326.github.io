"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1289],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),u=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=u(e.components);return r.createElement(l.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=u(n),h=o,m=d["".concat(l,".").concat(h)]||d[h]||p[h]||a;return n?r.createElement(m,i(i({ref:t},c),{},{components:n})):r.createElement(m,i({ref:t},c))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:o,i[1]=s;for(var u=2;u<a;u++)i[u]=n[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},21571:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>u});var r=n(87462),o=(n(67294),n(3905));const a={},i="Ex12: CRUD #1",s={unversionedId:"exercises/crud-1/index",id:"exercises/crud-1/index",title:"Ex12: CRUD #1",description:"1",source:"@site/docs/05-exercises/12-crud-1/index.md",sourceDirName:"05-exercises/12-crud-1",slug:"/exercises/crud-1/",permalink:"/docs/exercises/crud-1/",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Ex11: REST and Fetch",permalink:"/docs/exercises/rest-and-fetch/"},next:{title:"Ex:13 CRUD #2",permalink:"/docs/exercises/crud-2/"}},l={},u=[{value:"Overview",id:"overview",level:2},{value:"Starter Kit",id:"starter-kit",level:2},{value:"CRUD Server Walk Through",id:"crud-server-walk-through",level:2},{value:"TODO #1: Saving State on the File System",id:"todo-1-saving-state-on-the-file-system",level:2},{value:"Submission",id:"submission",level:2},{value:"Rubric and Grading",id:"rubric-and-grading",level:2},{value:"Exercise (2 points)",id:"exercise-2-points",level:3}],c={toc:u};function d(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"ex12-crud-1"},"Ex12: CRUD #1"),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"overview"},"Overview"),(0,o.kt)("p",null,"The goal of this exercise is to implement a basic CRUD server in two parts. You will understand the basic logic to manage state as a JavaScript object. Your job is to save and restore that state from a file."),(0,o.kt)("h2",{id:"starter-kit"},"Starter Kit"),(0,o.kt)("h2",{id:"crud-server-walk-through"},"CRUD Server Walk Through"),(0,o.kt)("p",null,"You will notice a ",(0,o.kt)("inlineCode",{parentName:"p"},"package.json")," file in the starter template. This is necessary to use ES6 module syntax (imports) in a Node.js environment. It is also used for a variety of other things including tracking library dependencies. We will see this at a later point. In addition, you will see ",(0,o.kt)("inlineCode",{parentName:"p"},"memcrud.js"),", this is the code that you will extend. This is a completely worked out example for managing a non-persistent counter with CRUD. You can run this code as is with from a command prompt using the following command inside the starter kit folder:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"node memcrud.js\n")),(0,o.kt)("p",null,"With the server running, you can test it by entering the following URLs into your browser:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"localhost:8080/create?name=counter1   // counter1 should now be 0 (counter[counter1] = 0)\nlocalhost:8080/create?name=counter2   // counter2 should now be 0\nlocalhost:8080/update?name=counter3   // should produce an error since there's no counter3\nlocalhost:8080/update?name=counter1   // counter1 should now be 1\nlocalhost:8080/update?name=counter1   // counter1 should now be 2\nlocalhost:8080/read?name=counter2     // should be 0\nlocalhost:8080/delete?name=counter2   // now it should be deleted\nlocalhost:8080/read?name=counter2     // this time it should fail\nlocalhost:8080/read?name=counter1     // should output 2\n")),(0,o.kt)("p",null,"If you interrupt your server and then restart it, you should see that the counter values are all gone:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"localhost:8080/read?name=counter1\n// the counter doesn't exist because as far as the server is concerned, it was never created!\n")),(0,o.kt)("h2",{id:"todo-1-saving-state-on-the-file-system"},"TODO #1: Saving State on the File System"),(0,o.kt)("p",null,"Now, you are going to extend the template code to provide persistence. You are probably familiar with the usual way one makes things in memory persistent: you write them to disk. That's what we're going to do for this TODO."),(0,o.kt)("p",null,"First, we will save the file in a JSON file called ",(0,o.kt)("inlineCode",{parentName:"p"},"counter.json"),". Put this near the top of the ",(0,o.kt)("inlineCode",{parentName:"p"},"memcrud.js")," file."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"const JSONfile = 'counter.json';\n")),(0,o.kt)("p",null,"As this shows, what we are going to do is have a file in JSON format that stores the counter object. To make this server really persistent (so it never loses any updates even if it dies), every time we read the counter, we need to reload it from disk, and every time we update it, we need to write it to disk first."),(0,o.kt)("p",null,'To read a file from disk, use the functions we covered in class. This will return a JSON string, which you then need to "parse" to get the actual object out. You can do this with ',(0,o.kt)("inlineCode",{parentName:"p"},"JSON.parse(str)"),", where ",(0,o.kt)("inlineCode",{parentName:"p"},"str")," is the string you get back from reading the file. Implement this all in the function called ",(0,o.kt)("inlineCode",{parentName:"p"},"reload"),"."),(0,o.kt)("p",null,"To write the data out, you want to convert the counter into a string; to do that, use ",(0,o.kt)("inlineCode",{parentName:"p"},"JSON.stringify(counter)"),"."),(0,o.kt)("p",null,"The reload function requires very little code, and you will only need to add a small amount of code to your server, either writing the counter to disk or reloading it."),(0,o.kt)("p",null,"Test it by running the tests above, then kill the server and try the last test:"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"http://localhost:8080/read?name=counter1"},"http://localhost:8080/read?name=counter1")),(0,o.kt)("p",null,"Your server should report that the counter still exists and has the value 2."),(0,o.kt)("p",null,"Go ahead and terminate your server, and open the file ",(0,o.kt)("inlineCode",{parentName:"p"},"counter.json"),". You should see the counter values."),(0,o.kt)("p",null,"You will find ",(0,o.kt)("strong",{parentName:"p"},"TODO #1")," in the ",(0,o.kt)("inlineCode",{parentName:"p"},"memcrud.js")," file."),(0,o.kt)("h2",{id:"submission"},"Submission"),(0,o.kt)("p",null,"You must do the following to submit this assignment:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Create a Zip archive of the folder containing your solution files."),(0,o.kt)("li",{parentName:"ul"},"Upload this Zip file to the Moodle assignment."),(0,o.kt)("li",{parentName:"ul"},"Check to make sure you uploaded your Zip archive to the Moodle assignment."),(0,o.kt)("li",{parentName:"ul"},"Check again.")),(0,o.kt)("h2",{id:"rubric-and-grading"},"Rubric and Grading"),(0,o.kt)("p",null,"Use the following rubric to satisfy the requirements of this assignment. We will be using this rubric to score your submission"),(0,o.kt)("h3",{id:"exercise-2-points"},"Exercise (2 points)"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"2 points, a reasonable attempt was made at completing the exercise, a solid attempt was made at completing all TODOs."),(0,o.kt)("li",{parentName:"ul"},"1 point, an attempt was made, but was incomplete or had missing or empty parts, not all TODOs were completed, minimal work."),(0,o.kt)("li",{parentName:"ul"},"0 points, empty or no submission.")))}d.isMDXComponent=!0}}]);